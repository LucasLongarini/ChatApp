(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{43:function(e,s,t){},44:function(e,s,t){},45:function(e,s,t){},46:function(e,s,t){},47:function(e,s,t){},48:function(e,s,t){},49:function(e,s,t){},50:function(e,s,t){},77:function(e,s){},83:function(e,s,t){"use strict";t.r(s);var n=t(1),a=t(0),r=t.n(a),i=t(7),c=t.n(i),u=(t(43),t(2)),o=t(3),h=t(6),l=t(5),d=t(4),j=(t(44),t(45),t(46),t(47),t(48),function(e){Object(l.a)(t,e);var s=Object(d.a)(t);function t(){return Object(u.a)(this,t),s.apply(this,arguments)}return Object(o.a)(t,[{key:"render",value:function(){return Object(n.jsx)("div",{style:{background:"".concat(this.props.color)},className:"user-avatar shadow1",children:Object(n.jsx)("i",{className:"fas fa-user"})})}}]),t}(r.a.Component)),b=function(e){Object(l.a)(t,e);var s=Object(d.a)(t);function t(){return Object(u.a)(this,t),s.apply(this,arguments)}return Object(o.a)(t,[{key:"render",value:function(){var e=this.props.message.isUser?"user":"",s=this.props.message,t=new Date(s.time);return Object(n.jsxs)("div",{className:"chat-message-container ".concat(e),children:[Object(n.jsx)("div",{className:"avatar-container",children:Object(n.jsx)(j,{color:s.user.color})}),Object(n.jsxs)("div",{className:"chat-bubble shadow1 ".concat(e),children:[Object(n.jsx)("h4",{className:"other",children:s.user.username}),Object(n.jsx)("p",{children:s.message}),Object(n.jsx)("h6",{children:t.toLocaleTimeString()})]})]})}}]),t}(r.a.Component),m=function(e){Object(l.a)(t,e);var s=Object(d.a)(t);function t(){return Object(u.a)(this,t),s.apply(this,arguments)}return Object(o.a)(t,[{key:"render",value:function(){var e=this.props.messages.map((function(e){return Object(n.jsx)(b,{message:e},e.time)}));return Object(n.jsx)("div",{className:"chat-list",children:e})}}]),t}(r.a.Component),O=function(e){Object(l.a)(t,e);var s=Object(d.a)(t);function t(e){var n;return Object(u.a)(this,t),(n=s.call(this,e)).sendMessage=n.sendMessage.bind(Object(h.a)(n)),n.textChanged=n.textChanged.bind(Object(h.a)(n)),n.onKeyDown=n.onKeyDown.bind(Object(h.a)(n)),n.state={value:""},n}return Object(o.a)(t,[{key:"sendMessage",value:function(){""!==this.state.value&&(this.props.handleMessageSent(this.state.value),this.setState({value:""}))}},{key:"onKeyDown",value:function(e){"Enter"===e.key&&this.sendMessage()}},{key:"textChanged",value:function(e){this.setState({value:e.target.value})}},{key:"render",value:function(){return Object(n.jsxs)("div",{className:"container chat-container",children:[this.props.user&&Object(n.jsxs)("p",{id:"user-indication",children:["You are ",Object(n.jsx)("span",{children:this.props.user.username})]}),Object(n.jsx)(m,{messages:this.props.messages}),Object(n.jsxs)("div",{className:"inputs",children:[Object(n.jsx)("input",{id:"input",className:"neo-shadow-inner",placeholder:"Type a message...",onKeyDown:this.onKeyDown,value:this.state.value,onChange:this.textChanged}),Object(n.jsx)("button",{id:"send-button",className:"neo-shadow-outer",onClick:this.sendMessage,children:"Send"})]})]})}}]),t}(r.a.Component),p=(t(49),t(50),function(e){Object(l.a)(t,e);var s=Object(d.a)(t);function t(){return Object(u.a)(this,t),s.apply(this,arguments)}return Object(o.a)(t,[{key:"render",value:function(){return Object(n.jsxs)("div",{className:"user-profile-container shadow1",children:[Object(n.jsx)(j,{color:this.props.user.color}),Object(n.jsx)("h3",{children:"".concat(this.props.user.username," ").concat(this.props.user.isUser?"(you)":"")})]})}}]),t}(r.a.Component)),v=function(e){Object(l.a)(t,e);var s=Object(d.a)(t);function t(){return Object(u.a)(this,t),s.apply(this,arguments)}return Object(o.a)(t,[{key:"render",value:function(){var e=this,s=this.props.users.map((function(s){return void 0!=e.props.user&&e.props.user.username===s.username&&(s.isUser=!0),Object(n.jsx)(p,{user:s},s.username)}));return Object(n.jsxs)("div",{className:"container user-container",children:[Object(n.jsx)("h1",{children:"Online Users"}),Object(n.jsx)("div",{className:"user-list",children:s})]})}}]),t}(r.a.Component),f=t(37),g=t.n(f),x=t(22),w=t.n(x),y=t(23),k=(t(80),function(e){Object(l.a)(t,e);var s=Object(d.a)(t);function t(e){var n;return Object(u.a)(this,t),n=s.call(this,e),y.a.configure(),n.handleMessageSent=n.handleMessageSent.bind(Object(h.a)(n)),n.handleLogin=n.handleLogin.bind(Object(h.a)(n)),n.handleNewMessages=n.handleNewMessages.bind(Object(h.a)(n)),n.handleNewUsers=n.handleNewUsers.bind(Object(h.a)(n)),n.handleNewUsername=n.handleNewUsername.bind(Object(h.a)(n)),n.handleError=n.handleError.bind(Object(h.a)(n)),n.state={user:void 0,messages:[],users:[]},n}return Object(o.a)(t,[{key:"componentDidMount",value:function(){this.socket=g()(),this.handleLogin(),this.handleError(),this.handleNewUsers(),this.handleNewMessages(),this.handleNewUsername()}},{key:"handleLogin",value:function(){var e=this;this.socket.on("login",(function(s){s.newUsername&&w.a.set("username",s.user.username,{expires:1e3}),e.setState({user:s.user}),s.messages.sort((function(e,s){var t=new Date(e.time).getTime();return new Date(s.time).getTime()-t})),s.messages.forEach((function(s){void 0!=e.state.user&&s.user.username===e.state.user.username&&(s.isUser=!0)})),e.setState({messages:s.messages,users:s.users})}))}},{key:"handleNewUsername",value:function(){var e=this;this.socket.on("new username",(function(s){e.state.user.username=s,e.setState({user:e.state.user}),w.a.set("username",s,{expires:1e3})}))}},{key:"handleNewMessages",value:function(){var e=this;this.socket.on("new messages",(function(s){s.sort((function(e,s){var t=new Date(e.time).getTime();return new Date(s.time).getTime()-t})),s.forEach((function(s){void 0!=e.state.user&&s.user.username===e.state.user.username&&(s.isUser=!0)})),e.setState({messages:s})}))}},{key:"handleNewUsers",value:function(){var e=this;this.socket.on("new users",(function(s){e.setState({users:s})}))}},{key:"handleMessageSent",value:function(e){this.socket.emit("send message",{message:e,user:this.state.user})}},{key:"handleError",value:function(){this.socket.on("error message",(function(e){y.a.error(e)}))}},{key:"render",value:function(){return Object(n.jsxs)("div",{className:"chat-view",children:[Object(n.jsx)(O,{user:this.state.user,messages:this.state.messages,handleMessageSent:this.handleMessageSent}),Object(n.jsx)(v,{user:this.state.user,users:this.state.users})]})}}]),t}(r.a.Component));c.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(k,{})}),document.getElementById("root"))}},[[83,1,2]]]);
//# sourceMappingURL=main.4c65bd0d.chunk.js.map